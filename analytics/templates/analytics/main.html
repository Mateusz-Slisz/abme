{% load staticfiles %}
{% load crispy_forms_tags %}


<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>ABME</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css">
    <link href="{% static 'css/analytics.css'%}" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'font-awesome/css/font-awesome.min.css'%}">
    <script src="https://cdn.rawgit.com/mattboldt/typed.js/master/lib/typed.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="nav-side-menu">
      <div class="brand">Analytics</div>
      <i class="fa fa-bars fa-2x toggle-btn" data-toggle="collapse" data-target="#menu-content"></i>
          <div class="menu-list">
              <ul id="menu-content" class="menu-content collapse out">
                  <li class="active">
                    <a href="#">
                    <i class="fa fa-dashboard fa-lg"></i> Dashboard
                    </a>
                  </li>
              </ul>
          </div>
    </div>

    <div class="main">
      <h3 class="mt-3">Dashboard</h3>
      <div class="row">
        <div class="col-12 mb-3">
          <div class="card">
            <div class="card-header">
              <i class="fa fa-line-chart"></i>
              Cast votes in {{ today.year }}
            </div>
            <div class="card-body">
              <div class="chart" >
                  <canvas id="myChart" height="100" width="400"></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="col-8">
          <div class="card">
            <div class="card-header">
              <i class="fa fa-bar-chart"></i>
              Amount of ratings in {{ today.year }}
            </div>
            <div class="card-body">
              <div class="chart" >
                  <canvas id="aorChart" ></canvas>
              </div>
            </div>
          </div>
        </div>

        <div class="col-4">
          <div class="card">
            <div class="card-header">
              <i class="fa fa-pie-chart"></i>
              Amount of votes in {{ today.year }}
            </div>
            <div class="card-body">
              <div class="chart" >
                  <canvas id="aovChart"  height="100" width="100"></canvas>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.min.js"></script>
    <script type="text/javascript">
            var ctx = document.getElementById("myChart");
            var myChart = new Chart(ctx, {
                type: 'line',
                data: {
                  labels: [{% for i in current_months %}'{{ i }}', {% endfor %}],
                  datasets: [{
                      label: 'Number of votes',
                      data: [{% for i in all_votes %}{{ i }}, {% endfor %}],
                      backgroundColor: '#99b3ff50',
                      borderColor: '#3e7899',
                      borderWidth: 2,
                      pointBackgroundColor: '#287eaf',
                      pointBorderWidth: 1,
                  }],
                },
                options: {
                    legend: {
                        display: false,
                    },
                }});

            var aov = document.getElementById("aovChart");
            var aovChart = new Chart(aov, {
                type: 'doughnut',
                data: {
                  datasets: [{
                      data: [{{ film_votes_countyear }}, {{ serial_votes_countyear }}],
                      backgroundColor: ['#4285f4', '#ea4335'],
                  }],
              
                  // These labels appear in the legend and in the tooltips when hovering different arcs
                  labels: [
                      'Films',
                      'TV Movies',
                  ]
              }});

            var aor = document.getElementById("aorChart");
            var aorChart = new Chart(aor, {
                type: 'bar',
                data: {
                  labels: [{% for i in all_rate_votes %}{{ forloop.counter }}, {% endfor %}],
                  datasets: [{
                      label: 'Number of ratings',
                      data: [{% for i in all_rate_votes %}{{ i }}, {% endfor %}],
                      backgroundColor: [
                        '#0085c3',
                        '#7ab800',
                        '#f2af00',
                        '#dc5034',
                        '#ce1126',
                        '#b7295a',
                        '#6e2585',
                        '#71c6c1',
                        '#5482ab',
                        '#444444',
                        ],
                  }],
                },
                options: {
                    legend: {
                        display: false,
                    },
                    scales: {
                        yAxes: [{
                            ticks: {
                                fontSize: 12,
                                min: 0,
                            }
                        }],
                    },
                }});
  </script>

  </body>
</html>